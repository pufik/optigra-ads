<div id="wrapper">

  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Optigra Ads</a>
    </div>

    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="lhs nav navbar-nav side-nav">
        <li id="mainlhs" class="menuitem"><a href="#home"><i class="fa fa-dashboard"></i> Dashboard</a></li>
        <li id="applicationlhs" class="menuitem active"><a href="#applications"><i class="fa fa-user"></i> Applications</a></li>
        <li id="userslhs" class="menuitem"><a href="#users"><i class="fa fa-user"></i> Users</a></li>
      </ul>

      <ul class="nav navbar-nav navbar-right navbar-user">

        <li class="dropdown user-dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i><b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="#"><i class="fa fa-user"></i> Profile</a></li>
            <li><a href="#"><i class="fa fa-gear"></i> Settings</a></li>
            <li class="divider"></li>
            <li><a href="logout"><i class="fa fa-power-off"></i> Log Out</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>

  <div id="page-wrapper">
	<div class="row">
		<div class="col-md-8">
	     	<legend><%= entity ? 'Edit' : 'New' %> Application</legend>
				<div>
				   <label>Application UID: </label> 
				   <input class="form-control" name="applicationUID" type="text" readonly="readonly" value="<%= entity ? entity.get('applicationId') : '' %>">
				</div>
				
			<form class="edit-application-form">
				
				<div>
				   <label>Name</label> 
				   <input class="form-control" name="name" type="text" value="<%= entity ? entity.get('name') : '' %>">
				</div>

				<div>
				   <label>Status</label>
				   <select class="form-control" name="status">
				   
		   			    <% _.each(['PENDING', 'PAID', 'UNPAID'], function(status) { %>
		   			    	<% if(entity) { %>
			   			    	<option value="<%=status %>" <%= entity.get('status') == status ? 'selected' : '' %> ><%=status%></option>
		   			    	<% } else { %>
			   			    	<option value="<%=status%>"><%=status%></option>
		   			    	<%}%>
					    <% }); %>

				   </select> 
				</div>
	
				<div>
				   <label>Url</label> 
				   <input class="form-control" name="url" type="text" value="<%= entity ? entity.get('url') : '' %>">
				</div>

				<div>
				   <label>Group Id</label> 
				   <input class="form-control" name="groupId" type="text" value="<%= entity ? entity.get('groupId') : '' %>">
				</div>

				<div>
				   <label>Group Name</label> 
				   <input class="form-control" name="groupName" type="text" value="<%= entity ? entity.get('groupName') : '' %>">
				</div>

				<br>
				<div class="row">
			         <div class="col-md-3">
	                        Choose File...
	                        <input id="applicationFile" type="file" name="file">
	                 </div>
			         <div class="col-md-4">
			         <br>
	                    <div id="prgDiv" class="progress">
						  <div id="prgrs" class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
						  </div>
						</div>
					</div>
				</div>
				<br>
	            <input class="form-control" id="imageUrl" name="imageUrl" type="hidden" value="<%= entity ? entity.get('imageUrl') : '' %>">
				<button id="saveApplicationBtn" class="btn"><%= entity ? 'Update' : 'Create' %></button>
				<% if(entity) { %> 
					<input type="hidden" name="applicationId" value="<%= entity.get('applicationId') %>" />
					<button id="deleteApplicationBtn" data-user-id="<%= entity.get('applicationId') %>" class="btn btn-danger delete">Delete</button>
				<% }; %>
			</form>
		</div>
 		<% if(entity) { %>
			    <br>
			    <div class="col-md-4">
			    	<div class="panel panel-info">
				    	<div class="panel-heading">
				    		<div class="panel-title">Certificate section</div>
				    	</div>	
			    		<div class="panel-body">
			    			<div id="certificateSectionDiv">
								<a class="btn btn-info form-control" id="addCertificate">Add/Change Certificate</a>
			    			</div>
			    			<br>
			    			<div id="apnsNotificationSectionDiv">
								<a class="btn btn-info form-control" id="showNotificationDialogBtn">Send Notification</a>
			    			</div>
			    		</div>
			    	</div>
			    </div> 
	    <% }; %>
	</div>
  </div>
</div>


<div id="certificateModalDialog" class="modal fade" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Creating new certificate</h4>
            </div>
            <div class="modal-body">
			<form class="edit-certificate-form">
				<legend><%= entity ? 'Edit' : 'New' %> Application</legend>
				
				<div>
				   <label>Password</label> 
				   <input class="form-control" name="password" type="text" value="<%= certificate ? certificate.get('password') : '' %>">
				</div>
				

				<br>
				<div class="row">
			         <div class="col-md-3">
	                        Choose File...
	                        <input id="certificateFile" type="file" name="file">
	                 </div>
			         <div class="col-md-4">
			         <br>
	                    <div id="prgDiv" class="progress">
						  <div id="prgrsCertificate" class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
						  </div>
						</div>
					</div>
				</div>
				<br>

				<input type="hidden" id="certificatePath" name="path" value="<%= certificate ? certificate.get('path'): '' %>">

				<% if(certificate) { %>
					<input type="hidden" id="id" name="id" value="<%= certificate.get('id') %>" />
				<% } %>

				<% if(entity) { %> 
					<input type="hidden" name="applicationId" value="<%= entity ? entity.get('applicationId') : ''  %>" />
				<% }; %>
			</form>
			
			<% if(entity) { %> 
				<button id="saveCertificateBtn" class="btn"><%= certificate ? 'Update' : 'Create' %></button>
			<% }; %>
			<% if(certificate) { %> 
				<button id="deleteCertificateBtn" data-user-id="<%= certificate ? certificate.get('applicationId') : '' %>" class="btn btn-danger delete">Delete</button>
			<% }; %>
            
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="apnsNotificationDialog" class="modal fade" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Creating new certificate</h4>
            </div>
            <div class="modal-body">
				<form class="send-notification-form">
					<legend>Send Notification Form</legend>

					<div>
					   <label>Title</label> 
					   <input class="form-control" name="title" type="text">
					</div>
	
					<div>
					   <label>Message</label> 
					   <input class="form-control" name="message" type="text">
					</div>
					
				</form>
				<br>
				<% if(entity) { %> 
					<button id="crateNotificationBtn" class="btn">Send</button>
				<% }; %>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<% if(entity) { %> 
	<input type="hidden" id="applicationId" value="<%= entity ? entity.get('applicationId') : ''  %>" />
<% }; %>
